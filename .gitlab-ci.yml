stages:
 - build

variables:
 IMAGE_TAG: $CI_PIPELINE_ID

build_api:
 stage: build
 image: docker:latest
 services:
    - docker:dind
 script:
    - docker build -t my-api:$IMAGE_TAG ./backend
    - docker push my-api:$IMAGE_TAG

build_frontend:
 stage: build
 image: docker:latest
 services:
    - docker:dind
 script:
    - docker build -t my-frontend:$IMAGE_TAG ./frontend
    - docker push my-frontend:$IMAGE_TAG
